{"version":3,"sources":["approve.js"],"names":["root","factory","define","amd","approve","exports","module","this","Result","approved","errors","each","callback","isFunc","constructor","call","apply","i","length","Card","scheme","valid","Score","strength","points","isMinimum","hasLower","hasUpper","hasNumber","hasSpecial","isBonus","percent","VERSION","tests","required","validate","value","message","expects","email","regex","test","url","alphaNumeric","numeric","alpha","decimal","currency","ip","ipv4","ipv4Cidr","ipv6","ipv6Cidr","min","pars","max","range","equal","format","Object","prototype","toString","time","truthy","falsy","_format","text","col","Array","slice","arguments","replace","m","n","trim","_start","rules","result","title","hasOwnProperty","rule","constraint","params","_test","args","_getArgs","ret","concat","_formatMessages","prop","push","_formatMessage","_eachExpected","fn","isArray","expectsLength","config","_getFormat","addTest","obj","name","e","cc","schemes","_getScheme","ca","card","sum","mul","charAt","_date","formats","date","val","moment","isValid","dateBefore","beforeDate","dateAfter","afterDate","minimum","minimumBonus","strengths","0","1","2","3","4","5","6","_getScore","match","Math","ceil","_getStrength","bonus","messages"],"mappings":"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","file":"approve.min.js","sourcesContent":["/**\n * approve.js v1.1.1\n * A simple validation library that doesn't interfere.\n * Author: Charl Gottschalk\n * @license: MIT\n */\n\n/** @namespace approve */\n;(function(root, factory) {    // eslint-disable-line no-extra-semi\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(function() {\n            // Also create a global in case some scripts\n            // that are loaded still are looking for\n            // a global even when an AMD loader is in use.\n            return (root.approve = factory());\n        });\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is self)\n        root.approve = factory();\n    }\n}(this, function(root) {\n    /**\n     * The result object returned by the <code>approve.value()</code> method.\n     * @memberOf approve\n     * @ignore\n     */\n    function Result() {\n        this.approved = true;\n        this.errors = [];\n        // Provides easy access to the loop for the errors.\n        this.each = function(callback) {\n            var isFunc = callback && callback.constructor && callback.call && callback.apply,\n                i = this.errors.length;\n            while (i--) {\n                if (isFunc) {\n                    callback(this.errors[i]);\n                }\n            }\n        };\n    }\n\n    /** @constructor */\n    var approve = {};\n\n    /**\n     * ApproveJs version\n     * @memberOf approve\n     * @ignore\n     */\n    approve.VERSION = '1.1.1';\n\n    /**\n     * Default tests.<br>\n     * Each test has at least three members.<br>\n     * <code>validate()</code> - the method which is called when testing a value.<br>\n     * <code>message</code> - the property that holds the default error message.<br>\n     * <code>expects</code> - the property that is either false if the test expects no parameters, or an array of strings representing the names of the expected parameters.<br>\n     * Each test either returns a boolean or an object.\n     * @memberOf approve\n     * @namespace approve.tests\n     */\n    approve.tests = {\n        /**\n         * Checks if a value is present.\n         * @example\n         * approve.value('some value', {required: true});\n         * @function required\n         * @memberOf approve.tests\n         * @inner\n         */\n        required: {\n            validate: function(value) {\n                return !!value;\n            },\n            message: '{title} is required',\n            expects: false\n        },\n        /**\n         * Checks if a value is a valid email address.\n         * @example\n         * approve.value('some value', {email: true});\n         * @function email\n         * @memberOf approve.tests\n         * @inner\n         */\n        email: {\n            regex: /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i, // eslint-disable-line no-control-regex\n            validate: function(value) {\n                return this.regex.test(value);\n            },\n            message: '{title} must be a valid email address',\n            expects: false\n        },\n        /**\n         * Checks if a value is a valid web address.\n         * @example\n         * approve.value('some value', {url: true});\n         * @function url\n         * @memberOf approve.tests\n         * @inner\n         */\n        url: {\n            regex: /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/i,\n            validate: function(value) {\n                return this.regex.test(value);\n            },\n            message: '{title} must be a valid web address',\n            expects: false\n        },\n        /**\n         * Checks if a value contains both letters and numbers.\n         * @example\n         * approve.value('some value', {alphaNumeric: true});\n         * @function alphaNumeric\n         * @memberOf approve.tests\n         * @inner\n         */\n        alphaNumeric: {\n            regex: /^[A-Za-z0-9]+$/i,\n            validate: function(value) {\n                return this.regex.test(value);\n            },\n            message: '{title} may only contain [A-Za-z] and [0-9]',\n            expects: false\n        },\n        /**\n         * Checks if a value contains only numbers.\n         * @example\n         * approve.value('some value', {numeric: true});\n         * @function numeric\n         * @memberOf approve.tests\n         * @inner\n         */\n        numeric: {\n            regex: /^[0-9]+$/,\n            validate: function(value) {\n                return this.regex.test(value);\n            },\n            message: '{title} may only contain [0-9]',\n            expects: false\n        },\n        /**\n         * Checks if a value contains only letters.\n         * @example\n         * approve.value('some value', {alpha: true});\n         * @function alpha\n         * @memberOf approve.tests\n         * @inner\n         */\n        alpha: {\n            regex: /^[A-Za-z]+$/,\n            validate: function(value) {\n                return this.regex.test(value);\n            },\n            message: '{title} may only contain [A-Za-z]',\n            expects: false\n        },\n        /**\n         * Checks if a value is a valid decimal.\n         * @example\n         * approve.value('some value', {decimal: true});\n         * @function decimal\n         * @memberOf approve.tests\n         * @inner\n         */\n        decimal: {\n            regex: /^\\s*(\\+|-)?((\\d+(\\.\\d+)?)|(\\.\\d+))\\s*$/,\n            validate: function(value) {\n                return this.regex.test(value);\n            },\n            message: '{title} must be a valid decimal',\n            expects: false\n        },\n        /**\n         * Similar to 'decimal', but for currency values.\n         * @example\n         * approve.value('some value', {currency: true});\n         * @function currency\n         * @memberOf approve.tests\n         * @inner\n         */\n        currency: {\n            regex: /^\\s*(\\+|-)?((\\d+(\\.\\d\\d)?)|(\\.\\d\\d))\\s*$/,\n            validate: function(value) {\n                return this.regex.test(value);\n            },\n            message: '{title} must be a valid currency value',\n            expects: false\n        },\n        /**\n         * Checks if a value is a valid ipv4 or ipv6 address.\n         * @example\n         * approve.value('some value', {ip: true});\n         * @function ip\n         * @memberOf approve.tests\n         * @inner\n         */\n        ip: {\n            regex: {\n                ipv4: /^(?:(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])$/,\n                ipv4Cidr: /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\/([0-9]|[1-2][0-9]|3[0-2]))$/,\n                ipv6: /^((?=.*::)(?!.*::.+::)(::)?([\\dA-F]{1,4}:(:|\\b)|){5}|([\\dA-F]{1,4}:){6})((([\\dA-F]{1,4}((?!\\3)::|:\\b|$))|(?!\\2\\3)){2}|(((2[0-4]|1\\d|[1-9])?\\d|25[0-5])\\.?\\b){4})$/i,\n                ipv6Cidr: /^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*(\\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))?$/\n            },\n            validate: function(value) {\n                return this.regex.ipv4.test(value) || this.regex.ipv6.test(value) || this.regex.ipv4Cidr.test(value) || this.regex.ipv6Cidr.test(value);\n            },\n            message: '{title} must be a valid IP address',\n            expects: false\n        },\n        /**\n         * Checks if a value is a minimum of n characters.\n         * @param {Integer} min - The minimum allowed length.\n         * @example\n         * approve.value('some value', {min: 5});\n         * @function min\n         * @memberOf approve.tests\n         * @inner\n         */\n        min: {\n            validate: function(value, pars) {\n                return typeof value === 'string' && value.length >= pars.min;\n            },\n            message: '{title} must be a minimum of {min} characters',\n            expects: ['min']\n        },\n        /**\n         * Checks if a value is a maximum of n characters.\n         * @param {Integer} max - The maximum allowed length.\n         * @example\n         * approve.value('some value', {max: 20});\n         * @function max\n         * @memberOf approve.tests\n         * @inner\n         */\n        max: {\n            validate: function(value, pars) {\n                return typeof value === 'string' && value.length <= pars.max;\n            },\n            message: '{title} must be a maximum of {max} characters',\n            expects: ['max']\n        },\n        /**\n         * Checks if a string's length or number is between a minimum and maximum.\n         * @param {Integer} min - The minimum allowed length.\n         * @param {Integer} max - The maximum allowed length.\n         * @example\n         * var rule = {\n         *     range: {\n         *         min: 5,\n         *         max: 20\n         *     }\n         * };\n         * approve.value('some value', rule);\n         * @function range\n         * @memberOf approve.tests\n         * @inner\n         */\n        range: {\n            validate: function(value, pars) {\n                if (typeof value === 'string')\n                {\n                    return value.length >= pars.min && value.length <= pars.max;\n                } else if (typeof value === 'number') {\n                    return value >= pars.min && value <= pars.max;\n                }\n                return false;\n            },\n            message: '{title} must be a minimum of {min} and a maximum of {max} characters',\n            expects: ['min', 'max']\n        },\n        /**\n         * Checks if a value is the same as the value of another.\n         * This test gets the value from a DOM &lt;input/&gt; element.\n         * @param {String} field - The id of the DOM &lt;input/&gt; element to test against.\n         * @example\n         * var rule = {\n         *     equal: 'password'\n         * };\n         * approve.value('some value', rule);\n         * @function equal\n         * @memberOf approve.tests\n         * @inner\n         */\n        equal: {\n            validate: function(value, pars) {\n                return '' + value === '' + pars.value;\n            },\n            message: '{title} must be equal to {field}',\n            expects: ['value', 'field']\n        },\n        /**\n         * Checks if a value passes a given regular expression.\n         * @param {RegExp} regex - The regular expression to test against. <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/RegExp\" target=\"_blank\">MDN</a>\n         * @example\n         * var rule = {\n         *     format: /^[A-Za-z0-9]+$/i\n         * };\n         * approve.value('some value', rule);\n         * @function format\n         * @memberOf approve.tests\n         * @inner\n         */\n        format: {\n            validate: function(value, pars) {\n                if (Object.prototype.toString.call(pars.regex) === '[object RegExp]') {\n                    return pars.regex.test(value);\n                }\n                throw 'approve.value(): [format] - regex is not a valid regular expression.';\n            },\n            message: '{title} did not pass the [{regex}] test',\n            expects: ['regex']\n        },\n        /**\n         * Checks if a value is a valid time string.\n         * @example\n         * approve.value('12:25:30', {timeString: true});\n         * @function time\n         * @memberOf approve.tests\n         * @inner\n         */\n        time: {\n            regex: /^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,\n            validate: function(value) {\n                return this.regex.test(value);\n            },\n            message: '{title} is not a valid time',\n            expects: false\n        },\n        /**\n         * Checks if a value is truthy ('yes', 'true', 'ok[ay]', '1').\n         * @example\n         * approve.value('yes', {truthy: true});\n         * @function truthy\n         * @memberOf approve.tests\n         * @inner\n         */\n        truthy: {\n            regex: /^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/i,\n            validate: function(value) {\n                return this.regex.test(value);\n            },\n            message: '{title} is not valid',\n            expects: false\n        },\n        /**\n         * Checks if a value is falsy ('No', 'false', '0').\n         * @example\n         * approve.value('No', {falsy: true});\n         * @function falsy\n         * @memberOf approve.tests\n         * @inner\n         */\n        falsy: {\n            regex: /^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/i,\n            validate: function(value) {\n                return !this.regex.test(value);\n            },\n            message: '{title} is not valid',\n            expects: false\n        }\n    };\n    /**\n     * A helper function for formatting strings:\n     * @example\n     * this._format('i can speak {language} since i was {age}', {language:'javascript',age:10});\n     * @example\n     * this._format('i can speak {0} since i was {1}', 'javascript',10});\n     * @return {String} The formatted string.\n     * @memberOf approve\n     * @ignore\n     */\n    approve._format = function(text, col) {\n        col = typeof col === 'object' ? col : Array.prototype.slice.call(arguments, 1);\n        return text.replace(/\\{\\{|\\}\\}|\\{(\\w+)\\}/g, function (m, n) {\n            if (m === \"{{\") { return \"{\"; }\n            if (m === \"}}\") { return \"}\"; }\n            return col[n];\n        }).trim();\n    };\n\n    /**\n     * The start of the validation process:\n     * @example\n     * var result = this._start(value, rules);\n     * @param {Object} value - The value to test.\n     * @param {Object} rules - The object containing the test constraints.\n     * @return {Object} The result of the test.\n     * @memberOf approve\n     * @ignore\n     */\n    approve._start = function(value, rules) {\n        // Instantiate a result object.\n        var result = new Result(),\n            // This is used to format the message with the value title.\n            title = '';\n        // Check if the rule has a title property?\n        if (rules.hasOwnProperty('title')) {\n            title = rules.title;\n        }\n        // Loop through given rules.\n        for (var rule in rules) {\n            if (rules.hasOwnProperty(rule) && rule !== 'title') {\n                var constraint = rules[rule];\n                // Check if rule exists in tests.\n                if (this.tests.hasOwnProperty(rule)) {\n                    // Set a pointer to the current test.\n                    var params = {\n                        constraint: constraint,\n                        rule: rule,\n                        title: title,\n                        test: this.tests[rule],\n                        value: value\n                    };\n                    this._test(params, result);\n                } else {\n                    throw 'approve.value(): ' + rule + ' test not defined.';\n                }\n            }\n        }\n\n        return result;\n    };\n\n    /**\n     * Performs the actual testing of the value and returns the result including any errors.\n     * @example\n     * var result = this._test(params);\n     * @param {Object} params - The parameters required for testing.\n     * @param {Object} result - The result object\n     * @memberOf approve\n     * @ignore\n     */\n    approve._test = function(params, result) {\n        // Create an args object for required parameters.\n        var args = this._getArgs(params),\n            // Test the value.\n            ret = params.test.validate(params.value, args);\n        // Check if the returned value is an object.\n        if(typeof ret === 'object')\n        {\n            // An object was returned.\n            // Check if the test was successful.\n            result.approved = !ret.valid ? false : result.approved;\n            // Add the error messages returned by the resluting object.\n            if (ret.hasOwnProperty('errors')) {\n                result.errors = result.errors.concat(this._formatMessages(ret.errors, params));\n            }\n            // Merge any properties from the resulting object with the main result to be returned.\n            for (var prop in ret) {\n                if (ret.hasOwnProperty(prop) && !result.hasOwnProperty(prop)) {\n                    result[prop] = ret[prop];\n                }\n            }\n        } else if (typeof ret !== 'boolean') {\n            // We don't process if it's not a boolean or object.\n            throw 'approve.value(): ' + params.rule + ' returned an invalid value';\n        } else {\n            result.approved = !ret ? false : result.approved;\n        }\n        if (!result.approved) {\n            result.errors.push(this._formatMessage(params));\n        }\n    };\n\n    /**\n     * Helper method to loop over expected test parameters.\n     * @example\n     * this._eachExpected(params, function(expected) {\n     *     // Do something with expected.\n     * });\n     * @param {Object} params - The parameters required for testing.\n     * @param {Function} fn - The callback function called during loop.\n     * @return {Void}\n     * @memberOf approve\n     * @ignore\n     */\n    approve._eachExpected = function(params, fn) {\n        if (Array.isArray(params.test.expects)) {\n            var expectsLength = params.test.expects.length,\n                i = expectsLength;\n            // This test expects paramaters.\n            // Loop through the test's expected parameters and call the given function.\n            while (i--) {\n                fn(params.test.expects[i], expectsLength);\n            }\n        }\n    };\n\n    /**\n     * Returns an object containing the arguments for a test's expected parameters.\n     * @example\n     * var pars = this._getArgs(params);\n     * @param {Object} params - The parameters required for testing.\n     * @return {Object} The object containing the arguments.\n     * @memberOf approve\n     * @ignore\n     */\n    approve._getArgs = function(params) {\n        var pars = {};\n        // Does the test for this rule expect any paramaters?\n        this._eachExpected(params, function(expects, expectsLength) {\n            // Check if the rule object has the required parameter.\n            if (params.constraint.hasOwnProperty(expects)) {\n                // Add the expected parameter value to the pars object.\n                pars[expects] = params.constraint[expects];\n            } else if (expectsLength <= 1 && /^[A-Za-z0-9]+$/i.test(params.constraint)) {\n                // Set the parameter to the rule's value.\n                pars[expects] = params.constraint;\n            } else {\n                throw 'approve.value(): ' + params.rule + ' expects the ' + expects + ' parameter.';\n            }\n        });\n\n\n        // Does the rule have config?\n        if (params.constraint.hasOwnProperty('config')) {\n            // Add the config to the pars object.\n            pars.config = params.constraint.config;\n        }\n        // Return the parameters object\n        return pars;\n    };\n\n    /**\n     * Returns an object containing placholder values to correctly format an error message.\n     * @example\n     * var format = this._getFormat(params);\n     * @param {Object} params - The parameters required for testing.\n     * @return {Object} The object used to format an error message.\n     * @memberOf approve\n     * @ignore\n     */\n    approve._getFormat = function(params) {\n        var format = {};\n        // Does the test for the rule expect parameters?\n        this._eachExpected(params, function(expects) {\n            // Check if the rule object has the required parameter.\n            if (params.constraint.hasOwnProperty(expects)) {\n                // Add the expected parameter's format to the parameter value.\n                format[expects] = params.constraint[expects];\n            }\n            // Expected parameter not present, is the constraint formattable?\n            if (/^[A-Za-z0-9]+$/i.test(params.constraint)) {\n                format[expects] = params.constraint;\n            }\n        });\n        format.title = params.title;\n        // Return the formatted message.\n        return format;\n    };\n\n    /**\n     * Returns an array of formatted error messages returned by tests that return objects instead of booleans.\n     * @example\n     * var errors = this._formatMessages(['array', 'of', 'errors'], params);\n     * @param {Array} errors - The array of unformatted errors returned by the test's result.\n     * @param {Object} params - The parameters required for testing.\n     * @return {Array} The formatted errors\n     * @memberOf approve\n     * @ignore\n     */\n    approve._formatMessages = function(errors, params) {\n        var format = this._getFormat(params),\n            i = errors.length;\n        while (i--) {\n            errors[i] = this._format(errors[i], format);\n        }\n        return errors;\n    };\n\n    /**\n     * Returns the correctly formatted message representing the current test's failure.\n     * @example\n     * this._message(rule, rules, title);\n     * @param {Object} params - The parameters required for testing.\n     * @return {String} The correctly formatted error message\n     * @memberOf approve\n     * @ignore\n     */\n    approve._formatMessage = function(params) {\n        var format = this._getFormat(params);\n        var message;\n\n        // Does the provided rule have a custom message?\n        if (params.constraint.hasOwnProperty('message')) {\n            // The rule has a custom message, return it.\n            message = params.constraint.message;\n            return this._format(message, format);\n        }\n        else {\n            // The rule does not have a custom message.\n            // Get the default message from the tests.\n            message = params.test.message;\n            return this._format(message, format);\n        }\n    };\n\n    /**\n     * Executes the tests based on given rules to validate a given value.<br><br>\n     * Returns an object with at least two properties:<br>\n     * <code>approved</code> : Boolean - <code>true</code> if test succeeded, otherwise <code>false</code>.<br>\n     * <code>errors</code> : Array of String - holds a list of formatted errors.\n     * @example\n     * var result = approve.value('some value', {test: constraints});\n     * if (result.approved) {\n     *    // Value is approved - do something\n     * } else {\n     *    // Do something with the errors\n     *    result.each(function(error) {\n     *       console.log(error);\n     *    });\n     * }\n     * @param {Object} value - The value to test against the rules.\n     * @param {Object} rules - The constraints for the value being tested.\n     * @return {Object} The object containing the result of the tests performed.\n     * @memberOf approve\n     */\n    approve.value = function(value, rules) {\n\n        // If rules is not an object, we cannot continue.\n        if (typeof rules !== 'object') {\n            throw 'approve.value(value, rules): rules is not a valid object.';\n        }\n        // Return the result object.\n        return this._start(value, rules);\n    };\n\n    /**\n     * Used to add custom tests.\n     * @example\n     * var test = {\n     *    expects: false,\n     *    message: '{title} did not pass the test.',\n     *    validate: function(value) {\n     *        return this.strength(value);\n     *    },\n     * };\n     * approve.addTest(test, 'test_name');\n     * @param {Object} obj - The test object to add.\n     * @param {String} name - The name of the test.\n     * @return void\n     * @memberOf approve\n     */\n    approve.addTest = function(obj, name) {\n        // If obj is not a valid object, we cannot continue.\n        if (typeof obj !== 'object') {\n            throw 'approve.addTest(obj, name): obj is not a valid object.';\n        }\n        try {\n            // Check if the test name already exists.\n            if (!this.tests.hasOwnProperty(name)) {\n                // The name does not exist, add it to the tests.\n                this.tests[name] = obj;\n            }\n        } catch (e) {\n            throw 'approve.addTest(): ' + e.message;\n        }\n    };\n    /**\n     * The result object containing the outcome of the credit card test.\n     */\n    function Card() {\n        this.scheme = '';\n        this.valid = false;\n    }\n    /** \n     * Checks if a value is a valid credit card.\n     * @example\n     * var rule = {\n     *     cc: true\n     * };\n     * approve.value('5105105105105100', rule);\n     * @return {Object} An object with various properties relating to the value's score.\n     * @function cc\n     * @memberOf approve.tests\n     * @inner\n     */\n    var cc = {\n        /**\n         * The default error message.\n         */\n        message: '{title} is not a valid credit card number',\n        schemes: [\n            {\n                regex: /^(5610|560221|560222|560223|560224|560225)/,\n                scheme: 'Australian Bank Card'\n            },\n            {\n                regex: /^(2014|2149)/,\n                scheme: 'Diner\\'s Club'\n            },\n            {\n                regex: /^36/,\n                scheme: 'Diner\\'s Club International'\n            },\n            {\n                regex: /^(30[0-5]|36|38|54|55|2014|2149)/,\n                scheme: 'Diner\\'s Club / Carte Blanche'\n            },\n            {\n                regex: /^35(2[89]|[3-8][0-9])/,\n                scheme: 'Japanese Credit Bureau'\n            },\n            {\n                regex: /^(5018|5020|5038|6304|6759|676[1-3])/,\n                scheme: 'Maestro'\n            },\n            {\n                regex: /^5[1-5]/,\n                scheme: 'Mastercard'\n            },\n            {\n                regex: /^(6304|670[69]|6771)/,\n                scheme: 'Laser'\n            },\n            {\n                regex: /^(6334|6767)/,\n                scheme: 'Solo (Paymentech)'\n            },\n            {\n                regex: /^(6011|622|64|65)/,\n                scheme: 'Discover'\n            },\n            {\n                regex: /^3[47]/,\n                scheme: 'American Express'\n            },\n            {\n                regex: /^(4026|417500|4508|4844|491(3|7))/,\n                scheme: 'Visa Electron'\n            },\n            {\n                regex: /^(4)/,\n                scheme: 'Visa'\n            }\n        ],\n        /**\n         * Returns the name of the credit card scheme.\n         * @param {Object} value - The credit card number to test.\n         * @return {Object} The result of the test.\n         */\n        _getScheme: function(value) {\n            value = (''+ value).replace(/\\D/g, '');\n\n            var i = this.schemes.length;\n            while (i--) {\n                if (this.schemes[i].regex.test(value)) {\n                    return this.schemes[i].scheme;\n                }\n            }\n\n            return undefined;\n        },\n        /**\n         * The method that is called by ApproveJs to perform the test.\n         * @param {Object} value - The value to test.\n         * @return {Object} The result object of the test.\n         */\n        validate: function(value) {\n            value = (''+ value).replace(/\\D/g, '');\n\n            var card = new Card(), \n                i = value.length,\n                sum = 0,\n                mul = 1,\n                ca;\n\n            // Not enough numbers. Shortest currently is 12. \n            if (i < 12) {\n                return false;\n            }\n\n            while (i--) {\n                ca = value.charAt(i) * mul;\n                sum += ca - (ca > 9) * 9;\n                mul ^= 3;\n            }\n\n            card.valid = (sum % 10 === 0) && (sum > 0);\n            card.scheme = this._getScheme(value);\n\n            return card;\n        }\n    };\n    approve.tests.cc = cc;\n\n    // Set defaults\n    approve._date = {\n        formats: ['MM/DD/YY', 'MM/DD/YYYY']\n    }\n\n    // uncomment if using these rules\n    //var moment = require('moment');\n\n    /**\n     * Checks if a value is a valid date.\n     * @example\n     * var rule = {\n     *     date: {\n     *         formats: ['MM/DD/YY', 'MM/DD/YYYY']\n     *     }\n     * };\n     * approve.value('12/24/2016', rule);\n     * @function date\n     * @memberOf approve.tests\n     * @inner\n     */\n    var date = {\n        /**\n         * Expects 'formats' as a  parameter.\n         */\n        expects: ['formats'],\n\n        /**\n         * The default error message.\n         */\n        message: '{title} is not a valid date.',\n\n        /**\n         * The method that is called by ApproveJs to perform the test.\n         * @param {String} value - The value to test.\n         * @param {object} value - The parameters to test with.\n         * @return {Object} The result object of the test.\n         */\n        validate: function(val, pars){\n            var format = pars.format || approve._date.formats;\n\n            return moment(val, format, true).isValid();\n        }\n    }\n\n    approve.tests.date = date;\n\n    /**\n     * Checks if a value is a valid date.\n     * @example\n     * var rule = {\n     *     dateBefore: {\n     *         before: '12/24/2016'\n     *     }\n     * };\n     * approve.value('12/23/2016', rule);\n     * @return {Object} An object with various properties relating to the value's score.\n     * @function date\n     * @memberOf approve.tests\n     * @inner\n     */\n    var dateBefore = {\n        /**\n         * Expects the 'date' (and 'formats') as  parameters.\n         */\n        expects: ['date'],\n\n        config: {\n            formats: approve._date.formats\n        },\n\n        /**\n         * The default error message.\n         */\n        message: '{title} should be before {date}.',\n\n        /**\n         * The method that is called by ApproveJs to perform the test.\n         * @param {String} value - The value to test.\n         * @param {object} value - The parameters to test with.\n         * @return {Object} The result object of the test.\n         */\n        validate: function(val, pars){\n            var date = pars.date;\n            var format = typeof pars.config != 'undefined' ? pars.config.formats || this.config.formats : this.config.formats;\n\n            var beforeDate = moment(date, format, true);\n\n            // If it's not a valid date, error\n            if (beforeDate === false)\n                return false;\n\n            return moment(val, format) < beforeDate;\n        }\n    }\n\n    approve.tests.dateBefore = dateBefore;\n\n\n    /**\n     * Checks if a value is a valid date.\n     * @example\n     * var rule = {\n     *     dateAfter: {\n     *         before: '12/24/2016'\n     *     }\n     * };\n     * approve.value('12/23/2016', rule);\n     * @return {Object} An object with various properties relating to the value's score.\n     * @function date\n     * @memberOf approve.tests\n     * @inner\n     */\n    var dateAfter = {\n        /**\n         * Expects the 'date' (and 'formats') as  parameters.\n         */\n        expects: ['date'],\n\n        config: {\n            formats: approve._date.formats\n        },\n\n        /**\n         * The default error message.\n         */\n        message: '{title} should be after {date}.',\n\n        /**\n         * The method that is called by ApproveJs to perform the test.\n         * @param {String} value - The value to test.\n         * @param {object} value - The parameters to test with.\n         * @return {Object} The result object of the test.\n         */\n        validate: function(val, pars){\n            var date = pars.date;\n            var format = typeof pars.config != 'undefined' ? pars.config.formats || this.config.formats : this.config.formats;\n\n            var afterDate = moment(date, format, true);\n\n            // If it's not a valid date, error\n            if (afterDate === false)\n                return false;\n\n            return moment(val, format) > afterDate;\n        }\n    }\n\n    approve.tests.dateAfter = dateAfter;\n\n    /**\n     * The result object containing the outcome of the strength test.\n     * @param {string} strength - The initial strength.\n     */\n    function Score(strength) {\n        this.strength = strength;\n        this.points = 0;\n        this.isMinimum = false;\n        this.hasLower = false;\n        this.hasUpper = false;\n        this.hasNumber = false;\n        this.hasSpecial = false;\n        this.isBonus = false;\n        this.percent = 0;\n        this.valid = false;\n        this.errors = [];\n    }\n    /** \n     * Checks if a value is a strong password string.\n     * @example\n     * var rule = {\n     *     strength: {\n     *         min: 8,\n     *         bonus: 10\n     *     }\n     * };\n     * approve.value('some value', rule);\n     * @return {Object} An object with various properties relating to the value's score.\n     * @function strength\n     * @memberOf approve.tests\n     * @inner\n     */\n    var strength = {\n        /**\n         * The minimum length a password must be.\n         */\n        minimum: 8,\n        /**\n         * The minimum length a password must be for a bonus point.\n         */\n        minimumBonus: 10,\n        /**\n         * The text representing the strength of a password.\n         */\n        strengths: {\n            0: 'Very Weak',\n            1: 'Weak',\n            2: 'Better',\n            3: 'Almost',\n            4: 'Acceptable',\n            5: 'Strong',\n            6: 'Very Strong'\n        },\n        /**\n         * The default error message.\n         */\n        message: '{title} did not pass the strength test.',\n        /**\n         * Expects the 'min' and 'bonus' parameters.\n         */\n        expects: ['min', 'bonus'],\n        /**\n         * Default error messages\n         * @type {Object}\n         */\n        errors: {\n            isMinimum: '{title} must be at least {min} characters',\n            hasLower: '{title} must have at least 1 lower case character',\n            hasUpper: '{title} must have at least 1 upper case character',\n            hasNumber: '{title} must have at least 1 number',\n            hasSpecial: '{title} must have at least 1 special character'\n        },\n        /**\n         * Returns an object containing the score of a value.\n         * @param {String} text - The text to score.\n         * @return {Object} The score of the text.\n         */\n        _getScore: function(text) {\n            // Create the object that represents the score of the text\n            var result = new Score(this.strengths[0]);\n            // If text is longer than minimum give 1 point.\n            // If text is longer than minimumBonus give another 1 point.\n            if (text.length > this.minimumBonus) {\n                result.points += 2;\n                result.isBonus = true;\n                result.isMinimum = true;\n            } else if (text.length > this.minimum){\n                result.points++;\n                result.isMinimum = true;\n            } else {\n                result.points = 1;\n                result.isMinimum = false;\n            }\n            // If text has lowercase characters give 1 point.\n            result.hasLower = text.match(/[a-z]/);\n            if(result.isMinimum) {\n                result.points++;\n            }\n            // If text has uppercase characters give 1 point.\n            result.hasUpper = text.match(/[A-Z]/);\n            if(result.isMinimum) {\n                result.points++;\n            }\n            // If text has at least one number give 1 point.\n            result.hasNumber = text.match(/\\d+/);\n            if(result.isMinimum) {\n                result.points++;\n            }\n            // If text has at least one special caracther give 1 point.\n            result.hasSpecial = text.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/);\n            if(result.isMinimum) {\n                result.points++;\n            }\n            // Set the percentage value.\n            result.percent = Math.ceil((result.points / 6) * 100);\n            // Return the score object.\n            return result;\n        },\n        /**\n         * Returns an object containing the score and validation of a value.\n         * @param {String} text - The text to score.\n         * @return {Object} The score and validation of the text.\n         */\n        _getStrength: function (text) {\n            var result = this._getScore(text);\n            result.strength = this.strengths[result.points];\n            if (!result.isMinimum) {\n                result.errors.push(this.errors.isMinimum);\n            }\n            if (!result.hasLower) {\n                result.errors.push(this.errors.hasLower);\n            }\n            if (!result.hasUpper) {\n                result.errors.push(this.errors.hasUpper);\n            }\n            if (!result.hasSpecial) {\n                result.errors.push(this.errors.hasSpecial);\n            }\n            if (!result.hasNumber) {\n                result.errors.push(this.errors.hasNumber);\n            }\n            if (result.points > 4) {\n              result.valid = true;\n            } \n            return result;\n        },\n        /**\n         * The method that is called by ApproveJs to perform the test.\n         * @param {String} value - The value to test.\n         * @return {Object} The result object of the test.\n         */\n        validate: function(value, pars) {\n            this.minimum = pars.min || this.minimum;\n            this.minimumBonus = pars.bonus || this.minimumBonus;\n            if (pars.hasOwnProperty('config') && pars.config.hasOwnProperty('messages')) {\n                for (var message in pars.config.messages) {\n                    if (pars.config.messages.hasOwnProperty(message)) {\n                        this.errors[message] = pars.config.messages[message];\n                    }\n                }\n            }\n            return this._getStrength(value);\n        }\n    };\n    approve.tests.strength = strength;\n\n    /*\n     * Return the main ApproveJs object.\n     */\n    return approve;\n}));"]}